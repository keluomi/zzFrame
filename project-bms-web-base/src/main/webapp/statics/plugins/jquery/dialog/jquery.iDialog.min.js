~function(t,i,s){var e,o=t(i),h=t(document),n=t.browser.msie,a=parseInt(t.browser.version),l=n&&a<7,d=1e3,c=!!navigator.userAgent.match(/mobile/i);!function(){var t,i,s=document.getElementsByTagName("script"),e=0,o=s.length,h=document.createElement("link");for(h.setAttribute("rel","stylesheet");e<o;e++)if(t=s["dialog-theme"]||s[e].getAttribute("dialog-theme")){i=s[e].src||s[e].getAttribute("src"),i=i.substring(0,i.lastIndexOf("/"))+"/theme/",h.setAttribute("href",i+t+"/style.css"),s[e].parentNode.insertBefore(h,s[e]);break}}(),drag=function(t,i){return new drag.fn.init(t,i)},drag.fn=drag.prototype={init:function(i){var s=this,e="(document.documentElement || document.body)";this.target=t(i.target),i=i||{},this.root=i.root?t(i.root):this.target,this.min=i.min,this.max=i.max,this.start=i.start,this.move=i.move,this.end=i.end,this.fixed=i.fixed,this.startPosition={},this.movePosition={};var n=function(t){return t=s.fixEvent(t),s.startPosition={x:t.layerX,y:t.layerY},s.start&&s.start(s.startPosition),h.bind("mousemove",a).bind("mouseup",d),this.setCapture&&this.setCapture(!1),t.preventDefault(),!1},a=function(t){return t=s.fixEvent(t),s.movePosition={x:t.clientX-s.startPosition.x,y:t.clientY-s.startPosition.y},s.limit(),s.fixed&&l?(s.root[0].style.setExpression("left","eval("+e+".scrollLeft + "+(s.movePosition.x-o.scrollLeft())+') + "px"'),s.root[0].style.setExpression("top","eval("+e+".scrollTop + "+(s.movePosition.y-o.scrollTop())+') + "px"')):s.root.css({left:s.movePosition.x,top:s.movePosition.y}),s.move&&s.move(s.movePosition),!1},d=function(){return h.unbind("mousemove",a).unbind("mouseup",d),s.end&&s.end(s.movePosition),!1};this.target.bind("mousedown",n).bind("mouseup",function(){this.releaseCapture&&this.releaseCapture()})},fixEvent:function(t){return t.pageX||(t.pageX=t.clientX+o.scrollTop(),t.pageY=t.clientY+o.scrollLeft()),t.layerX||(t.layerX=t.clientX-parseInt(this.root.css("left")),t.layerY=t.clientY-parseInt(this.root.css("top"))),t},limit:function(){void 0!==this.min&&(this.movePosition={x:Math.max(this.min.x,this.movePosition.x),y:Math.max(this.min.y,this.movePosition.y)}),void 0!==this.max&&(this.movePosition={x:Math.min(this.max.x,this.movePosition.x),y:Math.min(this.max.y,this.movePosition.y)})}},drag.fn.init.prototype=drag.fn,i.iDrag=t.drag=drag,e=function(t){return t.id&&void 0!==e.get[t.id]?(e.get[t.id].show(),e.get[t.id]):new e.fn.init(t)},e.fn=e.prototype={init:function(i){this.id=i.id,this._lock=i.lock||!1,this.fixed=i.fixed||!1,this.width=c?"100%":i.width||"auto",this.height=c?"100%":i.height||"auto",this.top=i.top,this.left=i.left,this.padding=i.padding||20,this._content=i.content||"loading...",this._init=i.init,this._show=i.show||function(){},this._hide=i.hide||function(){},this.opacity=void 0===i.opacity?0:i.opacity,this.background=i.background||"#000",this.title=void 0===i.title?"消息":i.title,this.follow=void 0!==i.follow&&t(i.follow),this.drag=void 0===i.drag||i.drag,this.effect=c?""===i.effect:void 0===i.effect?"i-scale":i.effect,this.esc=void 0===i.esc||i.esc,this.time=i.time,this.inited=!1,this.myDrag={},this._btn=i.btn,this.$body=t(document.body),this.show(),this.events(),this._init&&this._init.call(this)},lock:function(){var i=document.createElement("div");this.$lock=t(i).addClass("i-dialog-lock").css({zIndex:++d,height:h.height(),background:this.background}).html(l?'<iframe src="about:blank"></iframe>':""),this.$body[0].appendChild(i)},createHTML:function(){this._lock&&this.lock(),this.inited=!0;var i=document.createElement("div"),s="",e=this;!1!==this.title&&(s='<div class="target"><h2 class="title">'+this.title+'</h2><a href="javascript:void(0);" title="关闭" class="close">×</a></div>'),s+='<div class="content"></div>',this._btn&&(s+='<div class="wrapBtn"></div>'),this.$body[0].appendChild(i),this.$dialog=t(i).addClass("i-dialog").html(s).css({zIndex:++d,width:this.width,height:this.height}),this.$dialog.find("*").each(function(){e["$"+this.className]=t(this),this.className="i-"+this.className}),this.effect&&this.$dialog.addClass(this.effect),this._btn&&this.btn(this._btn,1),this.drag?this.myDrag=t.drag({target:this.$target,root:this.$dialog,fixed:this.fixed}):this.$target.css("cursor","default"),this.setPosition(),this.content(),!1===this.title&&this.$dialog.css({background:"none",boxShadow:"none",borderRadius:0,border:"none"})},content:function(t){return this.content=t||this.content,"string"==typeof this._content?this.$content.html(this._content):"object"==typeof this._content&&1===this._content.nodeType&&(this.$content[0].appendChild(this._content),this._content.style.display="block"),this},setPosition:function(){this.fixed?l?(this.$dialog.css({position:"absolute"}),t("html").css({backgroundImage:"url(about:blank)",backgroundAttachment:"fixed"})):this.$dialog.css({position:"fixed"}):this.$dialog.css({position:"absolute"})},show:function(){if(!this.inited&&this.createHTML(),this.id&&!e.get[this.id]&&(e.get[this.id]=this),!1!==this._show.call(this)){this._lock&&(this.$lock.show(),n&&a<9&&this.$lock.css({opacity:this.opacity}));var t=o.width(),i=o.height(),s=o.scrollLeft(),h=o.scrollTop(),d=this;this.follow&&this._follow(),this.$dialog.show().css({top:void 0!==this.top?this.top:.382*(i-this.height)+(l||!this.fixed?h:0),left:void 0!==this.top?this.left:(t-this.width)/2+(l||!this.fixed?s:0),width:this.width,height:this.height}),this.width=this.$dialog.outerWidth(),this.height=this.$dialog.outerHeight(),setTimeout(function(){console.log(d.opacity),d._lock&&d.$lock.css({opacity:d.opacity}),d.effect&&d.$dialog.addClass("i-show")},this.effect?50:0),this.time=this.time?setTimeout(function(){d.hide()},this.time):0}},_follow:function(){var t=this.follow.offset(),i=parseInt(this.follow.outerWidth()),s=parseInt(this.follow.outerHeight()),e=o.scrollTop(),h=o.scrollLeft(),n=o.width(),a=o.height(),l=e+a-this.height,d=h+n-this.width;this.top=t.top+s,this.left=t.left-(this.width-i)/2,this.top=this.top>l?t.top-this.height:this.top,this.left=this.left>d?d:this.left},hide:function(){if(!1!==this._hide.call(this)){var t=this.$dialog[0].style,i=0,s=this;void 0===t.transform&&void 0===t.webkitTransform&&void 0===t.mozTransform&&void 0===t.msTransform||(i=300),this.$dialog.removeClass("i-show"),this._lock&&this.$lock.css({opacity:0}),this.time&&clearTimeout(this.time),setTimeout(function(){s._lock&&s.$lock.hide(),s.$dialog.hide()},this.effect?i:0)}},events:function(){var i=this,s=null;o.bind("resize",function(){s&&clearTimeout(s),s=setTimeout(function(){i.limit(),parseInt(i.$dialog.css("left"))>i.myDrag.max.x&&i.$dialog.css("left",i.myDrag.max.x),parseInt(i.$dialog.css("top"))>i.myDrag.max.y&&i.$dialog.css("top",i.myDrag.max.y)},100)}),this.$close&&this.$close.bind("click",function(){i.hide()}),this.$lock&&this.$lock.bind("dblclick",function(){i.hide()}),this.esc&&h.bind("keyup",function(t){27==t.keyCode&&"none"!=i.$dialog.css("display")&&i.hide()}),this.$dialog.bind("mousedown",function(){t.each(e.get,function(){this.$dialog.zIndex==d&&this.$dialog.css({zIndex:d-1})})}),this.drag&&(this.myDrag.start=function(){i.limit()})},limit:function(){var t=o.width(),i=o.height(),s=o.scrollLeft(),e=o.scrollTop();this.myDrag.min={x:0,y:0},this.fixed&&l&&(this.myDrag.min={x:s,y:e}),this.fixed?this.myDrag.max=l?{x:t+s-this.width,y:i+e-this.height}:{x:t-this.width,y:i-this.height}:this.myDrag.max={x:t-this.width,y:h.height()-this.height}},btn:function(i,s){var e,o=this;t.each(i,function(t){e=!s&&o._btn[t]?o._btn[t].input:document.createElement("input"),e.type="button",e.value=this.val||e.value,e.className=this.type||e.className||"",!0===this.disabled?(e.disabled="disabled",e.className+=" i-disabled"):!1===this.disabled&&(e.disabled="",e.className=e.className.replace(" i-disabled","")),!s&&o._btn[t]||o.$wrapBtn.append(e),o._btn[t]||(o._btn[t]=this),o._btn[t].input=e,e.onclick=this.click?function(t){return function(){(t.click&&!1!==t.click.call(o,this)||!t.click)&&o.hide()}}(this):e.onclick||function(){o.hide()}})}},e.fn.init.prototype=e.fn,i.iDialog=t.dialog=e,e.get={},i.iDialog.get=t.dialog.get=e.get}(jQuery,this);